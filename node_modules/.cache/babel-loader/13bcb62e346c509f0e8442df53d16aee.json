{"ast":null,"code":"export default function withMiddleware(router) {\n  var middlewareFactories = [];\n  var middlewareFunctions = [];\n  router.useMiddleware = useMiddleware;\n  router.getMiddlewareFactories = getMiddlewareFactories;\n  router.getMiddlewareFunctions = getMiddlewareFunctions;\n  router.clearMiddleware = clearMiddleware;\n  /**\n   * Register middleware functions.\n   * @param  {...Function} middlewares The middleware functions\n   * @return {Object}                  The router instance\n   */\n\n  function useMiddleware() {\n    for (var _len = arguments.length, middlewares = Array(_len), _key = 0; _key < _len; _key++) {\n      middlewares[_key] = arguments[_key];\n    }\n\n    middlewares.forEach(addMiddleware);\n    return router;\n  }\n  /**\n   * Remove all middleware functions\n   * @return {Object} The router instance\n   */\n\n\n  function clearMiddleware() {\n    middlewareFactories = [];\n    middlewareFunctions = [];\n    return router;\n  }\n\n  function getMiddlewareFactories() {\n    return middlewareFactories;\n  }\n\n  function getMiddlewareFunctions() {\n    return middlewareFunctions;\n  }\n\n  function addMiddleware(middleware) {\n    middlewareFactories.push(middleware);\n    middlewareFunctions.push(router.executeFactory(middleware));\n  }\n}","map":null,"metadata":{},"sourceType":"module"}