{"ast":null,"code":"var _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) {\n  return typeof obj;\n} : function (obj) {\n  return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n};\n\nexport function nameToIDs(name) {\n  return name.split('.').reduce(function (ids, name) {\n    return ids.concat(ids.length ? ids[ids.length - 1] + '.' + name : name);\n  }, []);\n}\n\nfunction exists(val) {\n  return val !== undefined && val !== null;\n}\n\nfunction hasMetaParams(state) {\n  return state && state.meta && state.meta.params;\n}\n\nfunction extractSegmentParams(name, state) {\n  if (!hasMetaParams(state) || !exists(state.meta.params[name])) return {};\n  return Object.keys(state.meta.params[name]).reduce(function (params, p) {\n    params[p] = state.params[p];\n    return params;\n  }, {});\n}\n\nexport default function transitionPath(toState, fromState) {\n  var fromStateIds = fromState ? nameToIDs(fromState.name) : [];\n  var toStateIds = nameToIDs(toState.name);\n  var maxI = Math.min(fromStateIds.length, toStateIds.length);\n\n  function pointOfDifference() {\n    var i = void 0;\n\n    var _loop = function _loop() {\n      var left = fromStateIds[i];\n      var right = toStateIds[i];\n      if (left !== right) return {\n        v: i\n      };\n      var leftParams = extractSegmentParams(left, toState);\n      var rightParams = extractSegmentParams(right, fromState);\n      if (leftParams.length !== rightParams.length) return {\n        v: i\n      };\n      if (leftParams.length === 0) return 'continue';\n      var different = Object.keys(leftParams).some(function (p) {\n        return rightParams[p] !== leftParams[p];\n      });\n\n      if (different) {\n        return {\n          v: i\n        };\n      }\n    };\n\n    for (i = 0; i < maxI; i += 1) {\n      var _ret = _loop();\n\n      switch (_ret) {\n        case 'continue':\n          continue;\n\n        default:\n          if ((typeof _ret === 'undefined' ? 'undefined' : _typeof(_ret)) === \"object\") return _ret.v;\n      }\n    }\n\n    return i;\n  }\n\n  var i = void 0;\n\n  if (!fromState) {\n    i = 0;\n  } else if (!hasMetaParams(fromState) && !hasMetaParams(toState)) {\n    i = 0;\n  } else {\n    i = pointOfDifference();\n  }\n\n  var toDeactivate = fromStateIds.slice(i).reverse();\n  var toActivate = toStateIds.slice(i);\n  var intersection = fromState && i > 0 ? fromStateIds[i - 1] : '';\n  return {\n    intersection: intersection,\n    toDeactivate: toDeactivate,\n    toActivate: toActivate\n  };\n}","map":null,"metadata":{},"sourceType":"module"}