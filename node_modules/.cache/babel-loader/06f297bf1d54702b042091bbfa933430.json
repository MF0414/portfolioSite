{"ast":null,"code":"import _classCallCheck from \"/Users/mikefoster/Git/propelSite/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/mikefoster/Git/propelSite/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/mikefoster/Git/propelSite/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/mikefoster/Git/propelSite/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/mikefoster/Git/propelSite/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/Users/mikefoster/Git/propelSite/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/Users/mikefoster/Git/propelSite/src/App.js\";\nimport { Link } from 'react-router5';\nimport { connect } from 'react-redux';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport classNames from 'classnames';\nimport startCase from 'lodash.startcase';\nimport Switch from './Switch';\nimport styles from './App.css';\n\nvar App =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(App, _React$Component);\n\n  function App(props) {\n    var _this;\n\n    _classCallCheck(this, App);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(App).call(this, props));\n    _this.routeTo = _this.routeTo.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(App, [{\n    key: \"processMappings\",\n    value: function processMappings(router) {\n      var _this$props = this.props,\n          moduleMappings = _this$props.moduleMappings,\n          isLoggedIn = _this$props.isLoggedIn,\n          businessId = _this$props.businessId,\n          businessName = _this$props.businessName;\n      var links = Object.keys(moduleMappings).map(function (key) {\n        var route = moduleMappings[\"\".concat(key)];\n\n        if ((!route.protected || isLoggedIn()) && (!route.requiresBusiness || businessId !== false)) {\n          return React.createElement(Navigation.Link, {\n            url: \"#/\".concat(key),\n            key: key,\n            onSelect: function onSelect() {\n              router.actions.navigateTo(key);\n            },\n            label: moduleMappings[\"\".concat(key)].label,\n            items: [],\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 25\n            },\n            __self: this\n          });\n        }\n\n        return '';\n      });\n\n      if (businessId && businessName) {\n        return links.concat([React.createElement(Navigation.Link, {\n          url: \"#/business\",\n          key: \"currentBusiness\",\n          onSelect: function onSelect() {\n            router.actions.navigateTo('business');\n          },\n          label: businessName,\n          items: [],\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 38\n          },\n          __self: this\n        })]);\n      }\n\n      return links;\n    }\n  }, {\n    key: \"routeTo\",\n    value: function routeTo(type, suffix) {\n      var router = this.props.router;\n\n      if (type === 'routeback') {\n        window.location = router.previousRoute ? \"#\".concat(router.previousRoute.path) : '#';\n      } else if (type === 'routeahead') {\n        window.location = \"#\".concat(router.route.path, \"/\").concat(suffix);\n      } else {\n        window.location = \"#/\".concat(suffix);\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props2 = this.props,\n          router = _this$props2.router,\n          moduleMappings = _this$props2.moduleMappings;\n      var currentRoute = router.route.name;\n      var subsequentRoutes = currentRoute.split('.');\n      var primary = this.processMappings(router);\n      var secondary = [];\n      var brand = React.createElement(Navigation.Brand, {\n        url: \"#home\",\n        width: \"90px\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 69\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        style: {\n          marginLeft: '16px'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 70\n        },\n        __self: this\n      }, React.createElement(MYOBLogo, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 71\n        },\n        __self: this\n      })));\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76\n        },\n        __self: this\n      }, React.createElement(Navigation, {\n        brand: brand,\n        primary: primary,\n        secondary: secondary,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 77\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: classNames(styles.appBody, 'container'),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 78\n        },\n        __self: this\n      }, React.createElement(\"ol\", {\n        style: {\n          paddingLeft: '16px'\n        },\n        className: \"breadcrumb\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79\n        },\n        __self: this\n      }, React.createElement(\"li\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 80\n        },\n        __self: this\n      }, React.createElement(Link, {\n        href: \"#/home\",\n        routeName: \"home\",\n        className: currentRoute === 'home' ? styles.activeBreadCrumb : null,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81\n        },\n        __self: this\n      }, \"Home\")), subsequentRoutes.filter(function (route) {\n        return route !== 'home';\n      }).map(function (route, index) {\n        return React.createElement(\"li\", {\n          key: route,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 91\n          },\n          __self: this\n        }, React.createElement(Link, {\n          href: \"#/\".concat(route),\n          routeName: \"\".concat(route, \"-link\"),\n          className: subsequentRoutes.length === index + 1 ? styles.activeBreadCrumb : null,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 92\n          },\n          __self: this\n        }, startCase(route)));\n      })), React.createElement(Switch, {\n        moduleMappings: moduleMappings,\n        routeTo: this.routeTo,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104\n        },\n        __self: this\n      })));\n    }\n  }]);\n\n  return App;\n}(React.Component);\n\nApp.propTypes = {\n  moduleMappings: PropTypes.objectOf(PropTypes.object).isRequired,\n  router: PropTypes.objectOf(PropTypes.object).isRequired,\n  isLoggedIn: PropTypes.func.isRequired,\n  businessId: PropTypes.string.isRequired,\n  businessName: PropTypes.string.isRequired\n};\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    router: state.router,\n    businessId: state.businessReducer.businessId,\n    businessName: state.businessReducer.businessName\n  };\n};\n\nexport default connect(mapStateToProps)(App);","map":{"version":3,"sources":["/Users/mikefoster/Git/propelSite/src/App.js"],"names":["Link","connect","PropTypes","React","classNames","startCase","Switch","styles","App","props","routeTo","bind","router","moduleMappings","isLoggedIn","businessId","businessName","links","Object","keys","map","key","route","protected","requiresBusiness","actions","navigateTo","label","concat","type","suffix","window","location","previousRoute","path","currentRoute","name","subsequentRoutes","split","primary","processMappings","secondary","brand","marginLeft","appBody","paddingLeft","activeBreadCrumb","filter","index","length","Component","propTypes","objectOf","object","isRequired","func","string","mapStateToProps","state","businessReducer"],"mappings":"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","sourcesContent":["import { Link } from 'react-router5';\nimport { connect } from 'react-redux';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport classNames from 'classnames';\nimport startCase from 'lodash.startcase';\n\nimport Switch from './Switch';\nimport styles from './App.css';\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n    this.routeTo = this.routeTo.bind(this);\n  }\n\n  processMappings(router) {\n    const {\n      moduleMappings, isLoggedIn, businessId, businessName,\n    } = this.props;\n    const links = Object.keys(moduleMappings).map((key) => {\n      const route = moduleMappings[`${key}`];\n      if ((!route.protected || isLoggedIn()) && (!route.requiresBusiness || businessId !== false)) {\n        return (\n          <Navigation.Link\n            url={`#/${key}`}\n            key={key}\n            onSelect={() => { router.actions.navigateTo(key); }}\n            label={moduleMappings[`${key}`].label}\n            items={[]}\n          />);\n      }\n      return '';\n    });\n\n    if (businessId && businessName) {\n      return links.concat([(\n        <Navigation.Link\n          url=\"#/business\"\n          key=\"currentBusiness\"\n          onSelect={() => { router.actions.navigateTo('business'); }}\n          label={businessName}\n          items={[]}\n        />\n      )]);\n    }\n\n    return links;\n  }\n\n  routeTo(type, suffix) {\n    const { router } = this.props;\n    if (type === 'routeback') {\n      window.location = router.previousRoute ? `#${router.previousRoute.path}` : '#';\n    } else if (type === 'routeahead') {\n      window.location = `#${router.route.path}/${suffix}`;\n    } else {\n      window.location = `#/${suffix}`;\n    }\n  }\n\n  render() {\n    const { router, moduleMappings } = this.props;\n    const currentRoute = router.route.name;\n    const subsequentRoutes = currentRoute.split('.');\n    const primary = this.processMappings(router);\n    const secondary = [];\n    const brand = (\n      <Navigation.Brand url=\"#home\" width=\"90px\">\n        <div style={{ marginLeft: '16px' }}>\n          <MYOBLogo />\n        </div>\n      </Navigation.Brand>\n    );\n    return (\n      <div>\n        <Navigation brand={brand} primary={primary} secondary={secondary} />\n        <div className={classNames(styles.appBody, 'container')}>\n          <ol style={{ paddingLeft: '16px' }} className=\"breadcrumb\">\n            <li>\n              <Link\n                href=\"#/home\"\n                routeName=\"home\"\n                className={currentRoute === 'home' ? styles.activeBreadCrumb : null}\n              >\n                Home\n              </Link>\n            </li>\n            {\n              subsequentRoutes.filter(route => route !== 'home').map((route, index) => (\n                <li key={route}>\n                  <Link\n                    href={`#/${route}`}\n                    routeName={`${route}-link`}\n                    className={\n                      subsequentRoutes.length === index + 1 ? styles.activeBreadCrumb : null\n                    }\n                  >\n                    {startCase(route)}\n                  </Link>\n                </li>))\n            }\n          </ol>\n          <Switch moduleMappings={moduleMappings} routeTo={this.routeTo} />\n        </div>\n      </div>\n    );\n  }\n}\n\nApp.propTypes = {\n  moduleMappings: PropTypes.objectOf(PropTypes.object).isRequired,\n  router: PropTypes.objectOf(PropTypes.object).isRequired,\n  isLoggedIn: PropTypes.func.isRequired,\n  businessId: PropTypes.string.isRequired,\n  businessName: PropTypes.string.isRequired,\n};\n\nconst mapStateToProps = state => ({\n  router: state.router,\n  businessId: state.businessReducer.businessId,\n  businessName: state.businessReducer.businessName,\n});\n\nexport default connect(mapStateToProps)(App);\n"]},"metadata":{},"sourceType":"module"}