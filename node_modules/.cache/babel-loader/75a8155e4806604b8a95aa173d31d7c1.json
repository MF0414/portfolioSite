{"ast":null,"code":"import _classCallCheck from \"/Users/mikefoster/Git/propelSite/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/mikefoster/Git/propelSite/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/mikefoster/Git/propelSite/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/mikefoster/Git/propelSite/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/mikefoster/Git/propelSite/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/Users/mikefoster/Git/propelSite/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/Users/mikefoster/Git/propelSite/src/App.js\";\nimport { Link } from 'react-router5';\nimport { connect } from 'react-redux';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport classNames from 'classnames';\nimport startCase from 'lodash.startcase';\nimport Switch from './Switch';\nimport styles from './App.css';\n\nvar App =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(App, _React$Component);\n\n  function App(props) {\n    var _this;\n\n    _classCallCheck(this, App);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(App).call(this, props));\n    _this.routeTo = _this.routeTo.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(App, [{\n    key: \"processMappings\",\n    value: function processMappings(router) {\n      var _this$props = this.props,\n          moduleMappings = _this$props.moduleMappings,\n          isLoggedIn = _this$props.isLoggedIn,\n          businessId = _this$props.businessId,\n          businessName = _this$props.businessName;\n      var links = Object.keys(moduleMappings).map(function (key) {\n        var route = moduleMappings[\"\".concat(key)];\n\n        if ((!route.protected || isLoggedIn()) && (!route.requiresBusiness || businessId !== false)) {\n          return React.createElement(Navigation.Link, {\n            url: \"#/\".concat(key),\n            key: key,\n            onSelect: function onSelect() {\n              router.actions.navigateTo(key);\n            },\n            label: moduleMappings[\"\".concat(key)].label,\n            items: [],\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 25\n            },\n            __self: this\n          });\n        }\n\n        return '';\n      });\n\n      if (businessId && businessName) {\n        return links.concat([React.createElement(Navigation.Link, {\n          url: \"#/business\",\n          key: \"currentBusiness\",\n          onSelect: function onSelect() {\n            router.actions.navigateTo('business');\n          },\n          label: businessName,\n          items: [],\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 38\n          },\n          __self: this\n        })]);\n      }\n\n      return links;\n    }\n  }, {\n    key: \"routeTo\",\n    value: function routeTo(type, suffix) {\n      var router = this.props.router;\n\n      if (type === 'routeback') {\n        window.location = router.previousRoute ? \"#\".concat(router.previousRoute.path) : '#';\n      } else if (type === 'routeahead') {\n        window.location = \"#\".concat(router.route.path, \"/\").concat(suffix);\n      } else {\n        window.location = \"#/\".concat(suffix);\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props2 = this.props,\n          router = _this$props2.router,\n          moduleMappings = _this$props2.moduleMappings;\n      return React.createElement(Switch, {\n        moduleMappings: moduleMappings,\n        routeTo: this.routeTo,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 65\n        },\n        __self: this\n      });\n    }\n  }]);\n\n  return App;\n}(React.Component);\n\nApp.propTypes = {\n  moduleMappings: PropTypes.objectOf(PropTypes.object).isRequired,\n  router: PropTypes.objectOf(PropTypes.object).isRequired,\n  isLoggedIn: PropTypes.func.isRequired,\n  businessId: PropTypes.string.isRequired,\n  businessName: PropTypes.string.isRequired\n};\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    router: state.router,\n    businessId: state.businessReducer.businessId,\n    businessName: state.businessReducer.businessName\n  };\n};\n\nexport default connect(mapStateToProps)(App);","map":{"version":3,"sources":["/Users/mikefoster/Git/propelSite/src/App.js"],"names":["Link","connect","PropTypes","React","classNames","startCase","Switch","styles","App","props","routeTo","bind","router","moduleMappings","isLoggedIn","businessId","businessName","links","Object","keys","map","key","route","protected","requiresBusiness","actions","navigateTo","label","concat","type","suffix","window","location","previousRoute","path","Component","propTypes","objectOf","object","isRequired","func","string","mapStateToProps","state","businessReducer"],"mappings":"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","sourcesContent":["import { Link } from 'react-router5';\nimport { connect } from 'react-redux';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport classNames from 'classnames';\nimport startCase from 'lodash.startcase';\n\nimport Switch from './Switch';\nimport styles from './App.css';\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n    this.routeTo = this.routeTo.bind(this);\n  }\n\n  processMappings(router) {\n    const {\n      moduleMappings, isLoggedIn, businessId, businessName,\n    } = this.props;\n    const links = Object.keys(moduleMappings).map((key) => {\n      const route = moduleMappings[`${key}`];\n      if ((!route.protected || isLoggedIn()) && (!route.requiresBusiness || businessId !== false)) {\n        return (\n          <Navigation.Link\n            url={`#/${key}`}\n            key={key}\n            onSelect={() => { router.actions.navigateTo(key); }}\n            label={moduleMappings[`${key}`].label}\n            items={[]}\n          />);\n      }\n      return '';\n    });\n\n    if (businessId && businessName) {\n      return links.concat([(\n        <Navigation.Link\n          url=\"#/business\"\n          key=\"currentBusiness\"\n          onSelect={() => { router.actions.navigateTo('business'); }}\n          label={businessName}\n          items={[]}\n        />\n      )]);\n    }\n\n    return links;\n  }\n\n  routeTo(type, suffix) {\n    const { router } = this.props;\n    if (type === 'routeback') {\n      window.location = router.previousRoute ? `#${router.previousRoute.path}` : '#';\n    } else if (type === 'routeahead') {\n      window.location = `#${router.route.path}/${suffix}`;\n    } else {\n      window.location = `#/${suffix}`;\n    }\n  }\n\n  render() {\n    const { router, moduleMappings } = this.props;\n    return (\n      <Switch moduleMappings={moduleMappings} routeTo={this.routeTo} />\n    );\n  }\n}\n\nApp.propTypes = {\n  moduleMappings: PropTypes.objectOf(PropTypes.object).isRequired,\n  router: PropTypes.objectOf(PropTypes.object).isRequired,\n  isLoggedIn: PropTypes.func.isRequired,\n  businessId: PropTypes.string.isRequired,\n  businessName: PropTypes.string.isRequired,\n};\n\nconst mapStateToProps = state => ({\n  router: state.router,\n  businessId: state.businessReducer.businessId,\n  businessName: state.businessReducer.businessName,\n});\n\nexport default connect(mapStateToProps)(App);\n"]},"metadata":{},"sourceType":"module"}